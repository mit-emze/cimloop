{{include_text('defines.yaml')}}

architecture:
  nodes: &macro # TOP MACRO
  # ===========================================================================
  - !Container # Macro top-level
    name: macro
    <<<: [*container_defaults]
  - !Component #Input Buffer
    name: B_Buffer
    <<<: [*component_defaults, ]
    subclass: smartbuffer_sram
    attributes:
        depth: 2048
        width: 264
        n_banks: 1
        read_bandwidth: 264 #bits/cycle
        write_bandwidth: 264 #bits/cycle
  - !Component # Output Processing
    name: output_buffer
    <<<: [*component_defaults]
    class: smartbuffer_sram # class provided
    attributes:
        depth: 512
        width: 136
        n_banks: 1
        read_bandwidth: 136 #bits/cycle
        write_bandwidth: 136 #bits/cycle
  - !Component 
    name: matrix_scale
    class: intmultiplier #From aladdin
    attributes:
        technology: "FILL ME"
        global_cycle_seconds: "FILL ME"
        width: 640 #Lowkey could be very wrong, only number I saw
  - !Component
     name: bias_addition
     class: intadder
     attributes:
         technology: "FILL ME"
         global_cycle_seconds: "FILL ME"
         n_bits: 640 #Just following output bits
  - !Component
    name: scaling_factors_array # custom component
    class: latch_array
  - !Component
    name: bias_factors_array # custom component
    class: latch_array
  - !Component
    name: ppu_output # custom component
    class: latch_array
  - !Component
    name: approx_softmax # make custom component
  - !Component
     name: accumulation_collector
     class: latch_array #custom component
  - !Container
    name: A_Data_Bnk1
  - !Component
    name: A_Buffer_Bnk1
    name: output_buffer
    <<<: [*component_defaults]
    class: smartbuffer_sram
    attributes:
        depth: 128
        width: 264
        n_banks: 1
        read_bandwidth: 264 #bits/cycle
        write_bandwidth: 264 #bits/cycle
  - !Component
    name: A_Reg_Bnk1 #update every 16 cycles
    class: reg # comes from Aladdin plug-in, idk if we need to change because they only model 40nm
    attributes:
    technology: "FILL ME"
    global_cycle_seconds: "FILL ME"
    width: "FILL ME"
  - !Component
    name: Datapath_Bnk1
    class: vec_datapath #custom component
    
    
    
  
    
  
        
     